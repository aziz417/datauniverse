"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};$.fn.upload=function(t,e,o,n){return"object"!=(void 0===e?"undefined":_typeof(e))&&(n=o,o=e),this.each(function(){if($(this)[0].files[0]){var r=new FormData;if(r.append($(this).attr("name"),$(this)[0].files[0]),"object"==(void 0===e?"undefined":_typeof(e)))for(var a in e)r.append(a,JSON.stringify(e[a]));$.ajax({url:t,type:"POST",xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&n&&myXhr.upload.addEventListener("progress",function(t){var e=~~(t.loaded/t.total*100);n&&"function"==typeof n?n(t,e):n&&$(n).val(e)},!1),myXhr},data:r,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(t){var e;try{e=JSON.parse(t.responseText)}catch(o){e=t.responseText}o&&o(e)}})}})};